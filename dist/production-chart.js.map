{"version":3,"sources":["production-chart.es6.js"],"names":["Polymer","is","listeners","properties","width","type","Number","value","height","chartType","String","axisConfig","Object","actualDispVal","targetDispVal","designDispVal","forecastDispVal","actualLegendLabel","targetLegendLabel","forecastLegendLabel","designCapacityLegendLabel","hideActualLegend","Boolean","hideTargetLegend","hideForecastLegend","hideDesignCapacityLegend","legendLabels","Array","observer","unit","axisKeys","data","dateRange","notify","datePicker","ready","scopeSubtree","$","chart","isDatePickerBased","isDateRangeBased","attached","draw","d3","Px","me","margin","top","right","bottom","left","x","y","series","design","color","actual","target","forecast","actualCol","targetCol","forecastCol","designCol","defaultDotRadius","dotRadius","inTimeFormat","inputTimeFormat","parseTime","timeParse","tooltipTimeFormat","timeFormat","tooltipTimeFormat2","scaleTime","range","scaleLinear","clamp","actualArea","area","d","date","actualLine","line","targetChart","forecastLine","y1","designLine","svg","select","append","attr","forEach","getTime","key","today","yMax","max","Math","yMin","start","domain","extent","nice","timeDay","yScaledMin","y0","toolTip","tip","offset","html","msg","call","actualData","designData","forecastData","targetData","todayActual","todayTarget","todayForecast","todayDesign","_data","toFixed","push","lastObj","length","Date","set","updateLegendVal","revertLegendValToToday","style","dashArray","datum","selectAll","enter","i","on","hideActual","show","hide","hideForecast","areaAboveForecastLine","areaBelowForecastLine","areaAboveActual","areaBelowActual","defs","hideTarget","_xAxis","axisBottom","tickTimeFormat","tickFormat","hideGrid","axisLeft","ticks","tickSize","_yAxis","format","text","historicalLabel","todayLabel","forecastLabel","fire","_toggleActual","querySelector","display","querySelectorAll","elt","_toggleTarget","_toggleForecast","_redraw","newData","oldData","dom","node","innerHTML","_setLegendLabels","labels","_compute","prop"],"mappings":"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","file":"production-chart.js","sourcesContent":["(function() {\n  Polymer({\n\n\t\tis: 'production-chart',\n\n\t\tlisteners: {\n\t\t\t\"legend-actual.tap\": \"_toggleActual\",\n\t\t\t\"legend-target.tap\": \"_toggleTarget\",\n\t\t\t\"legend-forecast.tap\": \"_toggleForecast\"\n\t\t},\n\n    properties: {\n\t\t\twidth: {\n\t\t\t\ttype: Number,\n\t\t\t\tvalue: 960\n\t\t\t},\n\t\t\theight: {\n\t\t\t\ttype: Number,\n\t\t\t\tvalue: 300\n\t\t\t},\n\t\t\tchartType: {\n\t\t\t\ttype: String,\n\t\t\t\tvalue: \"line\"\n\t\t\t},\n\t\t\taxisConfig: {\n\t\t\t\ttype: Object,\n\t\t\t\tvalue: () => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t\"x\": {\n\t\t\t\t\t\t\t\"tickFormat\": \"\",\n\t\t\t\t\t\t\t\"inputTimeFormat\": \"%Y-%m-%dT%H:%M:%S.%LZ\",\n\t\t\t\t\t\t\t\"tickTimeFormat\": \"%d %b %y\",\n              \"todayLabel\": \"Today\",\n              \"historicalLabel\": \"Historical\",\n              \"forecastLabel\": \"Forecast\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"y\": {\n\t\t\t\t\t\t\t\"tickFormat\": \".3s\",\n\t\t\t\t\t\t\t\"hideGrid\": true,\n\t\t\t\t\t\t\t\"dotRadius\": 0,\n\t\t\t\t\t\t\t\"start\": 0,\n\t\t\t\t\t\t\t\"series\": {\n\t\t\t\t\t\t\t\t\"design\": {\n\t\t\t\t\t\t\t\t\t\"color\": \"rgba(237, 221, 70, 0.7)\",\n                  \"dashArray\": \"2,2\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\"actual\": {\n\t\t\t\t\t\t\t\t\t\"color\": \"#5fbcf8\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\"target\": {\n\t\t\t\t\t\t\t\t\t\"color\": \"#f05c56\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\"forecast\": {\n\t\t\t\t\t\t\t\t\t\"color\": \"rgba(164, 117, 237, 0.8)\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t},\n\t\t\tactualDispVal: {\n\t\t\t\ttype: Number\n\t\t\t},\n\t\t\ttargetDispVal: {\n\t\t\t\ttype: Number\n\t\t\t},\n\t\t\tdesignDispVal: {\n\t\t\t\ttype: Number\n\t\t\t},\n\t\t\tforecastDispVal: {\n\t\t\t\ttype: Number\n\t\t\t},\n\t\t\tactualLegendLabel: {\n\t\t\t\ttype: String\n\t\t\t},\n\t\t\ttargetLegendLabel: {\n\t\t\t\ttype: String\n\t\t\t},\n\t\t\tforecastLegendLabel: {\n\t\t\t\ttype: String\n\t\t\t},\n\t\t\tdesignCapacityLegendLabel: {\n\t\t\t\ttype: String\n\t\t\t},\n\t\t\thideActualLegend: {\n\t\t\t\ttype: Boolean,\n        value: false\n\t\t\t},\n\t\t\thideTargetLegend: {\n\t\t\t\ttype: Boolean,\n        value: false\n\t\t\t},\n\t\t\thideForecastLegend: {\n\t\t\t\ttype: Boolean,\n        value: false\n\t\t\t},\n\t\t\thideDesignCapacityLegend: {\n\t\t\t\ttype: Boolean,\n        value: false\n\t\t\t},\n\t\t\tlegendLabels: {\n\t\t\t\ttype: Array,\n        value() {\n\t\t\t\t\treturn [];\n\t\t\t\t},\n\t\t\t\tobserver: '_setLegendLabels'\n      },\n\t\t\tunit: {\n\t\t\t\ttype: String,\n\t\t\t\tvalue: \"Metric Ton/day\"\n\t\t\t},\n\t\t\taxisKeys: {\n\t\t\t\ttype: Array,\n\t\t\t\tvalue() {\n\t\t\t\t\treturn [\n\t\t\t\t\t\t\"actual\", \"target\", \"forecast\", \"design\"\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t},\n\t\t\tdata: {\n\t\t\t\ttype: Array,\n\t\t\t\tvalue() {\n\t\t\t\t\treturn [];\n\t\t\t\t},\n\t\t\t\tobserver: '_redraw'\n\t\t\t},\n\t\t\tdateRange: {\n\t\t\t\ttype: Object,\n\t\t\t\tnotify: true,\n\t\t\t\tvalue() {\n\t\t\t\t\treturn {}\n\t\t\t\t}\n\t\t\t},\n\t\t\tdatePicker: {\n\t\t\t\ttype: String,\n\t\t\t\tvalue: \"\"\n\t\t\t}\n\t\t},\n\n\t\tready() {\n\t\t\tthis.scopeSubtree(this.$.chart, true);\n\t\t},\n\n\t\tisDatePickerBased(datePicker) {\n\t\t\treturn datePicker ? true : false;\n\t\t},\n\n\t\tisDateRangeBased(datePicker) {\n\t\t\treturn datePicker ? false : true;\n\t\t},\n\n    attached() {\n\t\t},\n\n\t\tdraw() {\n\t\t\tlet d3 = Px.d3;\n\t\t\tlet me = this;\n\t\t\tlet data = this.data;\n\t\t\t// set the dimensions and margins of the graph\n\t\t\tlet margin = {top: 20, right: 20, bottom: 30, left: 50},\n\t\t\t\t\twidth = this.width - margin.left - margin.right,\n\t\t\t\t\theight = this.height - margin.top - margin.bottom;\n\n\t\t\tthis.axisConfig = this.axisConfig || {};\n\t\t\tthis.axisConfig.x = this.axisConfig.x || {};\n\t\t\tthis.axisConfig.y = this.axisConfig.y || {};\n\t\t\tthis.axisConfig.y.series = this.axisConfig.y.series || {};\n\t\t\tthis.axisConfig.y.series.design = this.axisConfig.y.series.design || {};\n\t\t\tthis.axisConfig.y.series.design.color = this.axisConfig.y.series.design.color || \"rgba(237, 221, 70, 0.7)\";\n\t\t\tthis.axisConfig.y.series.actual = this.axisConfig.y.series.actual || {};\n\t\t\tthis.axisConfig.y.series.actual.color = this.axisConfig.y.series.actual.color || \"#5fbcf8\";\n\t\t\tthis.axisConfig.y.series.target = this.axisConfig.y.series.target || {};\n\t\t\tthis.axisConfig.y.series.target.color = this.axisConfig.y.series.target.color || \"#f05c56\";\n\t\t\tthis.axisConfig.y.series.forecast = this.axisConfig.y.series.forecast || {};\n\t\t\tthis.axisConfig.y.series.forecast.color = this.axisConfig.y.series.forecast.color || \"rgba(164, 117, 237, 0.8)\";\n\n\t\t\tthis.actualCol = this.axisConfig.y.series.actual.color;\n\t\t\tthis.targetCol = this.axisConfig.y.series.target.color;\n\t\t\tthis.forecastCol = this.axisConfig.y.series.forecast.color;\n\t\t\tthis.designCol = this.axisConfig.y.series.design.color;\n\n\t\t\tthis.chartType = this.chartType || \"line\";\n\n\t\t\tlet defaultDotRadius = this.axisConfig.y.dotRadius;\n\t\t\tif(!defaultDotRadius) {\n\t\t\t\tif(defaultDotRadius != 0) {\n\t\t\t\t\tdefaultDotRadius = 2;\n\t\t\t\t} else {\n\t\t\t\t\tdefaultDotRadius = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tdefaultDotRadius = +defaultDotRadius\n\n\t\t\t// parse the date / time\n\t\t\tlet inTimeFormat = this.axisConfig.x.inputTimeFormat ?\n\t\t\t\tthis.axisConfig.x.inputTimeFormat : \"%Y-%m-%dT%H:%M:%S.%LZ\";\n\t\t\tlet parseTime = d3.timeParse(inTimeFormat);\n\n\t\t\tlet tooltipTimeFormat = d3.timeFormat(\"%A, %b %d\");\n\t\t\tlet tooltipTimeFormat2 = d3.timeFormat(\"%Y\");\n\n\t\t\t// set the ranges\n\t\t\tlet x = d3.scaleTime().range([0, width]);\n\t\t\tlet y = d3.scaleLinear().range([height, 0]).clamp(true);\n\n\t\t\tlet actualArea = d3.area()\n    \t\t\t.x(function(d) { return x(d.date); })\n\t\t\t\t\t.y(function(d) { return y(d[me.axisKeys[0]]); });\n\n\t\t\tlet actualLine = d3.line()\n    \t\t\t.x(function(d) { return x(d.date); })\n    \t\t\t.y(function(d) { return y(d[me.axisKeys[0]]); });\n\n\t\t\tlet targetChart = d3.line()\n\t\t\t\t\t.x(function(d) { return x(d.date); })\n\t\t\t\t\t.y(function(d) { return y(d[me.axisKeys[1]]); });\n\n\t\t\tlet forecastLine = d3.line()\n\t\t\t\t\t.x(function(d) { return x(d.date); })\n\t\t\t\t\t.y(function(d) { return y(d[me.axisKeys[2]]); });\n\n\t\t\tlet area = d3.area()\n\t\t\t\t\t.x(function(d) { return x(d.date); })\n\t\t\t\t\t.y1(function(d) { return y(d[me.axisKeys[3]]); });\n\n\t\t\tlet designLine = d3.line()\n\t\t\t\t\t.x(function(d) { return x(d.date); })\n\t\t\t\t\t.y(function(d) { return y(d[me.axisKeys[3]]); });\n\n\t\t\tlet svg = d3.select(this.$.chart).append(\"svg\")\n\t\t\t\t\t// .attr(\"width\", width + margin.left + margin.right)\n\t\t\t\t\t// .attr(\"height\", height + margin.top + margin.bottom)\n\t\t\t\t\t.attr(\"viewBox\", \"0 0 \"+this.width+\" \"+this.height)\n\t\t\t\t\t.attr(\"preserveAspectRatio\", \"xMidYMid meet\")\n\t\t\t\t.append(\"g\")\n\t\t\t\t\t.attr(\"transform\",\n\t\t\t\t\t\t\t\t\"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n\t\t\tdata.forEach(function(d) {\n\t\t\t\td.date = d.date.getTime ? d.date : parseTime(d.date);\n\t\t\t\tme.axisKeys.forEach((key)=>{\n\t\t\t\t\td[key] = d[key] ? (+d[key]) : 0;\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tlet today;\n\n\t\t\tlet yMax = d3.max(data, function(d) {\n\t\t\t\treturn Math.max(d.actual, d.target, d.forecast, d.design); });\n\t\t\tlet yMin = this.axisConfig.y.start;\n\t\t\tif(!yMin) {\n\t\t\t\tif(yMin != 0) {\n\t\t\t\t\tyMin = yMax/2;\n\t\t\t\t}\n\t\t\t}\n\t\t\tyMin = +yMin;\n\n\t\t\tx.domain(d3.extent(data, function(d) { return d.date; })).nice(d3.timeDay);\n\t\t\ty.domain([yMin, yMax]).nice(6);\n\n\t\t\tlet yScaledMin = y(y.domain()[0]);\n\n\t\t\tactualArea.y1(yScaledMin);\n\t\t\tarea.y0(yScaledMin);\n\n\t\t\tvar toolTip = d3.tip(d3.select(this.$.chart))\n\t\t\t\t.attr(\"class\", \"d3-tip\")\n\t\t\t\t.offset([-8, 0])\n\t\t\t\t.html(function(d) {\n\t\t\t\t\treturn d.msg;\n\t\t\t\t});\n\n    \tsvg.call(toolTip);\n\n\t\t\tlet actualData = [], designData = [], forecastData = [], targetData = [];\n\t\t\tlet todayActual = 0, todayTarget = 0, todayForecast = 0, todayDesign = 0;\n      data.forEach((_data) => {\n        if(_data.actual == _data.forecast) {\n\t\t\t\t\ttoday = _data.date;\n\t\t\t\t\tthis.designDispVal = _data.design.toFixed(0);\n\t\t\t\t\tthis.actualDispVal = _data.actual.toFixed(0);\n\t\t\t\t\tthis.targetDispVal = _data.target.toFixed(0);\n\t\t\t\t\tthis.forecastDispVal = _data.forecast.toFixed(0);\n\t\t\t\t\ttodayActual = this.actualDispVal;\n\t\t\t\t\ttodayTarget = this.targetDispVal;\n\t\t\t\t\ttodayForecast = this.forecastDispVal;\n\t\t\t\t\ttodayDesign = this.designDispVal;\n        }\n        if(_data.actual > 0) {actualData.push(_data)}\n        if(_data.target > 0) {targetData.push(_data)}\n        if(_data.forecast > 0) {forecastData.push(_data)}\n        if(_data.design > 0) {designData.push(_data)}\n      });\n      if(!todayActual && !todayTarget && !todayForecast && !todayDesign) {\n        let lastObj = data[data.length-1]\n        todayActual = lastObj.actualDispVal ? lastObj.actualDispVal.toFixed(0) : \"\";\n        todayTarget = lastObj.targetDispVal ? lastObj.targetDispVal.toFixed(0) : \"\";\n        todayForecast = lastObj.forecastDispVal ? lastObj.targetDispVal.toFixed(0) : \"\";\n        todayDesign = lastObj.designDispVal ? lastObj.targetDispVal.toFixed(0) : \"\";\n      }\n\n      if(!today) {\n        today = new Date();\n      }\n\n      this.set(\"hideActualLegend\", actualData.length === 0);\n      this.set(\"hideTargetLegend\", targetData.length === 0);\n      this.set(\"hideForecastLegend\", forecastData.length === 0);\n\t\t\tthis.set(\"hideDesignCapacityLegend\", designData.length === 0);\n\n\t\t\tlet updateLegendVal = (d) => {\n\t\t\t\tthis.actualDispVal = d.actual.toFixed(0);\n\t\t\t\tthis.targetDispVal = d.target.toFixed(0);\n\t\t\t\tthis.forecastDispVal = d.forecast.toFixed(0);\n\t\t\t\tthis.designDispVal = d.design.toFixed(0);\n\t\t\t};\n\n\t\t\tlet revertLegendValToToday = () => {\n\t\t\t\tthis.actualDispVal = todayActual;\n\t\t\t\tthis.targetDispVal = todayTarget;\n\t\t\t\tthis.forecastDispVal = todayForecast;\n\t\t\t\tthis.designDispVal = todayDesign;\n\t\t\t};\n\n\t\t\tif(designData.length) {\n        if(this.chartType === \"line\") {\n\t\t\t\t\tsvg.append(\"path\")\n\t\t\t\t\t\t.data([designData])\n\t\t\t\t\t\t.attr(\"class\", \"design-line\")\n\t\t\t\t\t\t.style(\"stroke\", this.axisConfig.y.series.design.color)\n            .style(\"stroke-dasharray\", this.axisConfig.y.series.design.dashArray || \"0,0\")\n\t\t\t\t\t\t.style(\"fill\", \"transparent\")\n\t\t\t\t\t\t.attr(\"d\", designLine)\n\t\t\t\t\t\t.style(\"pointer-events\", \"none\");\n\t\t\t\t} else {\n\t\t\t\t\tsvg.append(\"path\")\n\t\t\t\t\t\t.datum(designData)\n\t\t\t\t\t\t.attr(\"fill\", this.axisConfig.y.series.design.color)\n\t\t\t\t\t\t.attr(\"d\", area)\n\t\t\t\t\t\t.style(\"pointer-events\", \"none\");\n\t\t\t\t}\n\n\t\t\t\tsvg.selectAll(\".dot\")\n\t\t\t\t\t\t.data(designData)\n\t\t\t\t\t\t.enter()\n\t\t\t\t\t\t\t.append(\"circle\")\n\t\t\t\t\t\t\t.attr(\"r\", 0)\n\t\t\t\t\t\t\t.attr(\"cx\", (d, i) => x(d.date))\n\t\t\t\t\t\t\t.attr(\"cy\", (d) => y(d.design))\n\t\t\t\t\t\t\t.attr(\"fill\", \"transparent\")\n\t\t\t\t\t\t\t.attr(\"class\", \"design-circle\")\n\t\t\t\t\t\t\t.on('mouseover', function(d, i) {\n\t\t\t\t\t\t\t\tupdateLegendVal(d);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.on('mouseout', function(d) {\n\t\t\t\t\t\t\t\trevertLegendValToToday();\n\t\t\t\t\t\t\t});\n      }\n\n\t\t\tif(!this.hideActual && actualData.length) {\n\t\t\t\tif(this.chartType === \"line\") {\n\t\t\t\t\tsvg.append(\"path\")\n\t\t\t\t\t\t.data([actualData])\n\t\t\t\t\t\t.attr(\"class\", \"actual-area actual-line\")\n\t\t\t\t\t\t.style(\"stroke\", this.axisConfig.y.series.actual.color)\n            .style(\"stroke-dasharray\", this.axisConfig.y.series.actual.dashArray || \"0,0\")\n\t\t\t\t\t\t.style(\"fill\", \"transparent\")\n\t\t\t\t\t\t.attr(\"d\", actualLine)\n\t\t\t\t\t\t.style(\"pointer-events\", \"none\");\n\t\t\t\t} else {\n\t\t\t\t\tsvg.append(\"path\")\n\t\t\t\t\t\t.datum(actualData)\n\t\t\t\t\t\t.attr(\"class\", \"actual-area\")\n\t\t\t\t\t\t.style(\"fill\", this.axisConfig.y.series.actual.color)\n\t\t\t\t\t\t.attr(\"d\", actualArea)\n\t\t\t\t\t\t.style(\"pointer-events\", \"none\");\n\t\t\t\t}\n\n\t\t\t\tsvg.selectAll(\".dot\")\n\t\t\t\t\t.data(actualData)\n\t\t\t\t\t.enter()\n\t\t\t\t\t\t.append(\"circle\")\n\t\t\t\t\t\t.attr(\"r\", defaultDotRadius)\n\t\t\t\t\t\t.attr(\"cx\", (d, i) => x(d.date))\n\t\t\t\t\t\t.attr(\"cy\", (d) => y(d.actual))\n\t\t\t\t\t\t.attr(\"fill\", this.axisConfig.y.series.actual.color)\n\t\t\t\t\t\t.attr(\"class\", \"actual-circle\")\n\t\t\t\t\t\t.on('mouseover', function(d, i) {\n\t\t\t\t\t\t\td3.select(this)\n\t\t\t\t\t\t\t\t.attr('r', defaultDotRadius + 3);\n\t\t\t\t\t\t\td.msg = tooltipTimeFormat(d.date) + \"<br>\"\n\t\t\t\t\t\t\t\t+ \"Actual of <b>\" + d.actual + \"</b><br>\" + \"produced in \"\n\t\t\t\t\t\t\t\t+ tooltipTimeFormat2(d.date);\n\t\t\t\t\t\t\tupdateLegendVal(d);\n\t\t\t\t\t\t\ttoolTip.show(d);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.on('mouseout', function(d) {\n\t\t\t\t\t\t\td3.select(this)\n\t\t\t\t\t\t\t\t.attr('r', defaultDotRadius);\n\t\t\t\t\t\t\trevertLegendValToToday();\n\t\t\t\t\t\t\ttoolTip.hide(d);\n\t\t\t\t\t\t});\n\t\t\t}\n\n      if(!this.hideForecast && forecastData.length > 0) {\n\t\t\t\tif(this.chartType === \"line\") {\n\n\t\t\t\t} else {\n\t\t\t\t\tlet areaAboveForecastLine = d3.area()\n\t\t\t\t\t\t.x(forecastLine.x())\n\t\t\t\t\t\t.y0(forecastLine.y())\n\t\t\t\t\t\t.y1(yScaledMin);\n\t\t\t\t\tlet areaBelowForecastLine = d3.area()\n\t\t\t\t\t\t.x(forecastLine.x())\n\t\t\t\t\t\t.y0(forecastLine.y())\n\t\t\t\t\t\t.y1(actualArea.y());\n\t\t\t\t\tlet areaAboveActual = d3.area()\n\t\t\t\t\t\t.x(actualArea.x())\n\t\t\t\t\t\t.y0(actualArea.y())\n\t\t\t\t\t\t.y1(yScaledMin);\n\t\t\t\t\tlet areaBelowActual = d3.area()\n\t\t\t\t\t\t.x(actualArea.x())\n\t\t\t\t\t\t.y0(actualArea.y())\n\t\t\t\t\t\t.y1(forecastLine.y());\n\t\t\t\t\tlet defs = svg.append('defs');\n\n\t\t\t\t\tdefs.append('clipPath')\n\t\t\t\t\t\t.attr('id', 'clip-forecast')\n\t\t\t\t\t\t.append('path')\n\t\t\t\t\t\t.datum(forecastData)\n\t\t\t\t\t\t.attr(\"class\", \"forecast-area forecast-positive\")\n\t\t\t\t\t\t.attr('d', areaAboveForecastLine)\n\t\t\t\t\t\t.style(\"pointer-events\", \"none\");\n\n\t\t\t\t\tdefs.append('clipPath')\n\t\t\t\t\t\t.attr('id', 'clip-actual')\n\t\t\t\t\t\t.append('path')\n\t\t\t\t\t\t.datum(forecastData)\n\t\t\t\t\t\t.attr(\"class\", \"forecast-area forecast-negative\")\n\t\t\t\t\t\t.attr('d', areaAboveActual)\n\t\t\t\t\t\t.style(\"pointer-events\", \"none\");\n\n\t\t\t\t\tsvg.append('path')\n\t\t\t\t\t\t.datum(forecastData)\n\t\t\t\t\t\t.attr('d', areaBelowForecastLine)\n\t\t\t\t\t\t.attr(\"class\", \"forecast-area forecast-negative\")\n\t\t\t\t\t\t.attr('clip-path', 'url(#clip-actual)')\n\t\t\t\t\t\t.style(\"pointer-events\", \"none\");\n\n\t\t\t\t\tsvg.append('path')\n\t\t\t\t\t\t.datum(forecastData)\n\t\t\t\t\t\t.attr('d', areaBelowActual)\n\t\t\t\t\t\t.attr(\"class\", \"forecast-area forecast-positive\")\n\t\t\t\t\t\t.attr('clip-path', 'url(#clip-forecast)')\n\t\t\t\t\t\t.style(\"pointer-events\", \"none\");\n\t\t\t\t}\n      }\n\n\t\t\tif(!this.hideTarget && targetData.length) {\n\t\t\t\tsvg.append(\"path\")\n\t\t\t\t\t\t.data([targetData])\n\t\t\t\t\t\t.attr(\"class\", \"target-line\")\n\t\t\t\t\t\t.style(\"stroke\", this.axisConfig.y.series.target.color)\n            .style(\"stroke-dasharray\", this.axisConfig.y.series.target.dashArray || \"0,0\")\n\t\t\t\t\t\t.attr(\"d\", targetChart)\n\t\t\t\t\t\t.style(\"pointer-events\", \"none\");\n\n\t\t\t\tsvg.selectAll(\".dot\")\n\t\t\t\t\t.data(targetData)\n\t\t\t\t\t.enter()\n\t\t\t\t\t\t.append(\"circle\")\n\t\t\t\t\t\t.attr(\"r\", defaultDotRadius)\n\t\t\t\t\t\t.attr(\"cx\", (d, i) => x(d.date))\n\t\t\t\t\t\t.attr(\"cy\", (d) => y(d.target))\n\t\t\t\t\t\t.attr(\"fill\", this.axisConfig.y.series.target.color)\n\t\t\t\t\t\t.attr(\"class\", \"target-circle\")\n\t\t\t\t\t\t.on('mouseover', function(d, i) {\n\t\t\t\t\t\t\td3.select(this)\n\t\t\t\t\t\t\t\t.attr('r', defaultDotRadius + 3);\n\t\t\t\t\t\t\td.msg = tooltipTimeFormat(d.date) + \"<br>\"\n\t\t\t\t\t\t\t\t+ \"Target of <b>\" + d.target + \"</b><br>\" + \"produced in \"\n\t\t\t\t\t\t\t\t+ tooltipTimeFormat2(d.date);\n\t\t\t\t\t\t\tupdateLegendVal(d);\n\t\t\t\t\t\t\ttoolTip.show(d);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.on('mouseout', function(d) {\n\t\t\t\t\t\t\td3.select(this)\n\t\t\t\t\t\t\t\t.attr('r', defaultDotRadius);\n\t\t\t\t\t\t\trevertLegendValToToday();\n\t\t\t\t\t\t\ttoolTip.hide(d);\n\t\t\t\t\t\t});\n\t\t\t}\n\n      if(!this.hideForecast && forecastData.length) {\n        svg.append(\"path\")\n\t\t\t\t\t.datum(forecastData)\n\t\t\t\t\t.attr(\"class\", \"forecast-line\")\n          .style(\"stroke-dasharray\", this.axisConfig.y.series.forecast.dashArray || \"0,0\")\n\t\t\t\t\t.attr(\"d\", forecastLine);\n\n        svg.selectAll(\".dot\")\n\t\t\t\t\t.data(forecastData)\n\t\t\t\t\t.enter()\n\t\t\t\t\t\t.append(\"circle\")\n\t\t\t\t\t\t.attr(\"r\", defaultDotRadius)\n\t\t\t\t\t\t.attr(\"cx\", (d, i) => x(d.date))\n\t\t\t\t\t\t.attr(\"cy\", (d) => y(d.forecast))\n\t\t\t\t\t\t.attr(\"fill\", this.axisConfig.y.series.forecast.color)\n\t\t\t\t\t\t.attr(\"class\", \"forecast-circle\")\n\t\t\t\t\t\t.on('mouseover', function(d, i) {\n\t\t\t\t\t\t\td3.select(this)\n\t\t\t\t\t\t\t\t.attr('r', defaultDotRadius + 3);\n\t\t\t\t\t\t\td.msg = tooltipTimeFormat(d.date) + \"<br>\"\n\t\t\t\t\t\t\t\t+ \"Forecast of <b>\" + d.forecast + \"</b><br>\" + \"produced in \"\n\t\t\t\t\t\t\t\t+ tooltipTimeFormat2(d.date);\n\t\t\t\t\t\t\tupdateLegendVal(d);\n\t\t\t\t\t\t\ttoolTip.show(d);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.on('mouseout', function(d) {\n\t\t\t\t\t\t\td3.select(this)\n\t\t\t\t\t\t\t\t.attr('r', defaultDotRadius);\n\t\t\t\t\t\t\trevertLegendValToToday();\n\t\t\t\t\t\t\ttoolTip.hide(d);\n\t\t\t\t\t\t});\n      }\n\n\t\t\t// Add the X Axis\n\t\t\tlet _xAxis = d3.axisBottom(x);\n\t\t\tif(this.axisConfig.x.tickTimeFormat) {\n\t\t\t\t_xAxis.tickFormat(d3.timeFormat(\n\t\t\t\t\tthis.axisConfig.x.tickTimeFormat || \"%d %b %y\"));\n\t\t\t}\n\t\t\tsvg.append(\"g\")\n\t\t\t\t\t.attr(\"transform\", \"translate(0,\" + height + \")\")\n\t\t\t\t\t.attr(\"class\", \"x-axis\")\n\t\t\t\t\t.call(_xAxis);\n\n\t\t\tif(!this.axisConfig.y.hideGrid) {\n\t\t\t\tsvg.append(\"g\")\n\t\t\t\t\t.attr(\"class\", \"y-grid\")\n\t\t\t\t\t.call(d3.axisLeft(y)\n\t\t\t\t\t\t\t.ticks(5)\n\t\t\t\t\t\t\t.tickSize(-width)\n\t\t\t\t\t\t\t.tickFormat(\"\"));\n\t\t\t}\n\n\t\t\t// Add the Y Axis\n\t\t\tlet _yAxis = d3.axisLeft(y).ticks(6);\n\t\t\tif(this.axisConfig.y.tickFormat) {\n\t\t\t\t_yAxis.tickFormat(d3.format(this.axisConfig.y.tickFormat));\n\t\t\t}\n\t\t\tsvg.append(\"g\")\n\t\t\t\t\t.attr(\"class\", \"y-axis\")\n\t\t\t\t\t.call(_yAxis);\n\n      svg.append(\"svg:line\")\n        .attr(\"class\", \"today\")\n        .attr(\"x1\", x(today))\n        .attr(\"y1\", height+18)\n        .attr(\"x2\", x(today))\n        .attr(\"y2\", -7);\n\n      svg.append(\"text\")\n        .attr(\"class\", \"today-text\")\n        .attr(\"x\", (x(x.domain()[0]) + x(today))/2)\n        .attr(\"y\", -9)\n\t\t\t\t.text(this.axisConfig.x.historicalLabel || \"Historical\");\n\n\t\t\tsvg.append(\"text\")\n        .attr(\"class\", \"today-text\")\n        .attr(\"x\", x(today)-10)\n        .attr(\"y\", -9)\n\t\t\t\t.text(this.axisConfig.x.todayLabel || \"Today\");\n\n\t\t\tif(!this.hideForecast && forecastData.length > 0) {\n\t\t\t\tsvg.append(\"text\")\n\t\t\t\t\t.attr(\"class\", \"today-text\")\n\t\t\t\t\t.attr(\"x\", (x(x.domain()[1]) * 0.8))\n\t\t\t\t\t.attr(\"y\", -9)\n\t\t\t\t\t.text(this.axisConfig.x.forecastLabel || \"Forecast\");\n\t\t\t}\n\n\t\t\tsvg.append(\"text\")\n\t\t\t\t.attr(\"transform\", \"rotate(-90)\")\n\t\t\t\t.attr(\"y\", 0 - margin.left)\n\t\t\t\t.attr(\"x\",0 - (height / 2))\n\t\t\t\t.attr(\"dy\", \"1em\")\n\t\t\t\t.attr(\"class\", \"yaxis-label\")\n\t\t\t\t.text(this.unit);\n\n      this.fire(\"chart-drawn\", {});\n\t\t},\n\t\t_toggleActual() {\n\t\t\tthis.hideActual = !this.hideActual;\n\t\t\tif(this.hideActual) {\n\t\t\t\tthis.querySelector(\".actual-area\").style.display = \"none\";\n\t\t\t\tthis.querySelectorAll(\".actual-circle\").forEach((elt) => {\n\t\t\t\t\telt.style.display = \"none\";\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.querySelector(\".actual-area\").style.display = \"block\";\n\t\t\t\tthis.querySelectorAll(\".actual-circle\").forEach((elt) => {\n\t\t\t\t\telt.style.display = \"block\";\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t_toggleTarget() {\n\t\t\tthis.hideTarget = !this.hideTarget;\n\t\t\tif(this.hideTarget) {\n\t\t\t\tthis.querySelector(\".target-line\").style.display = \"none\";\n\t\t\t\tthis.querySelectorAll(\".target-circle\").forEach((elt) => {\n\t\t\t\t\telt.style.display = \"none\";\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.querySelector(\".target-line\").style.display = \"block\";\n\t\t\t\tthis.querySelectorAll(\".target-circle\").forEach((elt) => {\n\t\t\t\t\telt.style.display = \"block\";\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t_toggleForecast() {\n\t\t\tthis.hideForecast = !this.hideForecast;\n\t\t\tif(this.hideForecast) {\n\t\t\t\tthis.querySelector(\".forecast-line\").style.display = \"none\";\n\t\t\t\tthis.querySelectorAll(\".forecast-circle\").forEach((elt) => {\n\t\t\t\t\telt.style.display = \"none\";\n\t\t\t\t});\n        this.querySelectorAll(\".forecast-area\").forEach((elt) => {\n\t\t\t\t\telt.style.display = \"none\";\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.querySelector(\".forecast-line\").style.display = \"block\";\n\t\t\t\tthis.querySelectorAll(\".forecast-circle\").forEach((elt) => {\n\t\t\t\t\telt.style.display = \"block\";\n\t\t\t\t});\n\t\t\t\tthis.querySelectorAll(\".forecast-area\").forEach((elt) => {\n\t\t\t\t\telt.style.display = \"block\";\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t_redraw(newData, oldData) {\n\t\t\tPolymer.dom(this.$.chart).node.innerHTML = \"\";\n\t\t\tthis.draw();\n\t\t},\n\t\t_setLegendLabels(labels) {\n\t\t\tif(labels && labels.length) {\n\t\t\t\tthis.set(\"actualLegendLabel\", labels[0]);\n\t\t\t\tthis.set(\"targetLegendLabel\", labels[1]);\n\t\t\t\tthis.set(\"forecastLegendLabel\", labels[2]);\n\t\t\t\tthis.set(\"designCapacityLegendLabel\", labels[3]);\n\t\t\t}\n\t\t},\n    _compute(prop) {\n      return prop;\n    }\n  });\n})();\n"]}