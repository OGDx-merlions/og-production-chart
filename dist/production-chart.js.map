{"version":3,"sources":["production-chart.es6.js"],"names":["Polymer","is","listeners","properties","width","type","Number","value","height","actualDispVal","targetDispVal","designDispVal","forecastDispVal","actualLegendLabel","String","targetLegendLabel","forecastLegendLabel","designCapacityLegendLabel","hideActualLegend","Boolean","hideTargetLegend","hideForecastLegend","hideDesignCapacityLegend","legendLabels","Array","observer","unit","axisKeys","data","dateRange","Object","notify","ready","scopeSubtree","$","chart","attached","draw","d3","Px","me","margin","top","right","bottom","left","parseTime","timeParse","tooltipTimeFormat","timeFormat","tooltipTimeFormat2","x","scaleTime","range","y","scaleLinear","clamp","actualArea","area","d","date","targetChart","line","forecastLine","y1","svg","select","append","attr","forEach","getTime","key","today","yMax","max","Math","actual","target","forecast","design","yMin","domain","extent","nice","timeDay","yScaledMin","y0","toolTip","tip","offset","html","msg","call","actualData","designData","forecastData","targetData","todayActual","todayTarget","todayForecast","todayDesign","_data","push","Date","set","length","updateLegendVal","revertLegendValToToday","datum","style","selectAll","enter","i","on","hideActual","show","hide","hideForecast","areaAboveForecastLine","areaBelowForecastLine","areaAboveActual","areaBelowActual","defs","hideTarget","axisBottom","tickFormat","axisLeft","ticks","tickSize","text","fire","_toggleActual","querySelector","display","querySelectorAll","elt","_toggleTarget","_toggleForecast","_redraw","newData","oldData","dom","node","innerHTML","_setLegendLabels","labels","_compute","prop"],"mappings":"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","file":"production-chart.js","sourcesContent":["(function() {\n  Polymer({\n\n\t\tis: 'production-chart',\n\n\t\tlisteners: {\n\t\t\t\"legend-actual.tap\": \"_toggleActual\",\n\t\t\t\"legend-target.tap\": \"_toggleTarget\",\n\t\t\t\"legend-forecast.tap\": \"_toggleForecast\"\n\t\t},\n\n    properties: {\n\t\t\twidth: {\n\t\t\t\ttype: Number,\n\t\t\t\tvalue: 960\n\t\t\t},\n\t\t\theight: {\n\t\t\t\ttype: Number,\n\t\t\t\tvalue: 300\n\t\t\t},\n\t\t\tactualDispVal: {\n\t\t\t\ttype: Number\n\t\t\t},\n\t\t\ttargetDispVal: {\n\t\t\t\ttype: Number\n\t\t\t},\n\t\t\tdesignDispVal: {\n\t\t\t\ttype: Number\n\t\t\t},\n\t\t\tforecastDispVal: {\n\t\t\t\ttype: Number\n\t\t\t},\n\t\t\tactualLegendLabel: {\n\t\t\t\ttype: String\n\t\t\t},\n\t\t\ttargetLegendLabel: {\n\t\t\t\ttype: String\n\t\t\t},\n\t\t\tforecastLegendLabel: {\n\t\t\t\ttype: String\n\t\t\t},\n\t\t\tdesignCapacityLegendLabel: {\n\t\t\t\ttype: String\n\t\t\t},\n\t\t\thideActualLegend: {\n\t\t\t\ttype: Boolean,\n        value: false\n\t\t\t},\n\t\t\thideTargetLegend: {\n\t\t\t\ttype: Boolean,\n        value: false\n\t\t\t},\n\t\t\thideForecastLegend: {\n\t\t\t\ttype: Boolean,\n        value: false\n\t\t\t},\n\t\t\thideDesignCapacityLegend: {\n\t\t\t\ttype: Boolean,\n        value: false\n\t\t\t},\n\t\t\tlegendLabels: {\n\t\t\t\ttype: Array,\n        value() {\n\t\t\t\t\treturn [];\n\t\t\t\t},\n\t\t\t\tobserver: '_setLegendLabels'\n      },\n\t\t\tunit: {\n\t\t\t\ttype: String,\n\t\t\t\tvalue: \"Metric Ton/day\"\n\t\t\t},\n\t\t\taxisKeys: {\n\t\t\t\ttype: Array,\n\t\t\t\tvalue() {\n\t\t\t\t\treturn [\n\t\t\t\t\t\t\"actual\", \"target\", \"forecast\", \"design\"\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t},\n\t\t\tdata: {\n\t\t\t\ttype: Array,\n\t\t\t\tvalue() {\n\t\t\t\t\treturn [];\n\t\t\t\t},\n\t\t\t\tobserver: '_redraw'\n\t\t\t},\n\t\t\tdateRange: {\n\t\t\t\ttype: Object,\n\t\t\t\tnotify: true,\n\t\t\t\tvalue() {\n\t\t\t\t\treturn {}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tready() {\n\t\t\tthis.scopeSubtree(this.$.chart, true);\n\t\t},\n\n\t\tattached() {\n\t\t\tthis.draw();\n\t\t},\n\n\t\tdraw() {\n\t\t\tlet d3 = Px.d3;\n\t\t\tlet me = this;\n\t\t\tlet data = this.data;\n\t\t\t// set the dimensions and margins of the graph\n\t\t\tlet margin = {top: 20, right: 20, bottom: 30, left: 50},\n\t\t\t\t\twidth = this.width - margin.left - margin.right,\n\t\t\t\t\theight = this.height - margin.top - margin.bottom;\n\n\t\t\t// parse the date / time\n\t\t\tlet parseTime = d3.timeParse(\"%Y-%m-%dT%H:%M:%S.%LZ\");\n\n\t\t\tlet tooltipTimeFormat = d3.timeFormat(\"%A, %b %d\");\n\t\t\tlet tooltipTimeFormat2 = d3.timeFormat(\"%Y\");\n\n\t\t\t// set the ranges\n\t\t\tlet x = d3.scaleTime().range([0, width]);\n\t\t\tlet y = d3.scaleLinear().range([height, 0]).clamp(true);\n\n\t\t\tlet actualArea = d3.area()\n    \t\t\t.x(function(d) { return x(d.date); })\n    \t\t\t.y(function(d) { return y(d[me.axisKeys[0]]); });\n\n\t\t\tlet targetChart = d3.line()\n\t\t\t\t\t.x(function(d) { return x(d.date); })\n\t\t\t\t\t.y(function(d) { return y(d[me.axisKeys[1]]); });\n\n\t\t\tlet forecastLine = d3.line()\n\t\t\t\t\t.x(function(d) { return x(d.date); })\n\t\t\t\t\t.y(function(d) { return y(d[me.axisKeys[2]]); });\n\n\t\t\tlet area = d3.area()\n\t\t\t\t\t.x(function(d) { return x(d.date); })\n\t\t\t\t\t.y1(function(d) { return y(d[me.axisKeys[3]]); });\n\t\t\t\t\t\n\t\t\tlet svg = d3.select(this.$.chart).append(\"svg\")\n\t\t\t\t\t// .attr(\"width\", width + margin.left + margin.right)\n\t\t\t\t\t// .attr(\"height\", height + margin.top + margin.bottom)\n\t\t\t\t\t.attr(\"viewBox\", \"0 0 \"+this.width+\" \"+this.height)\n\t\t\t\t\t.attr(\"preserveAspectRatio\", \"xMidYMid meet\")\n\t\t\t\t.append(\"g\")\n\t\t\t\t\t.attr(\"transform\",\n\t\t\t\t\t\t\t\t\"translate(\" + margin.left + \",\" + margin.top + \")\");\n\t\t\t\n\t\t\tdata.forEach(function(d) {\n\t\t\t\td.date = d.date.getTime ? d.date : parseTime(d.date);\n\t\t\t\tme.axisKeys.forEach((key)=>{\n\t\t\t\t\td[key] = d[key] ? (+d[key]) : 0;\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tlet today;\n\t\t\t\n\t\t\tlet yMax = d3.max(data, function(d) {\n\t\t\t\treturn Math.max(d.actual, d.target, d.forecast, d.design); });\n\t\t\tlet yMin = yMax/2;\n\n\t\t\tx.domain(d3.extent(data, function(d) { return d.date; })).nice(d3.timeDay);\n\t\t\ty.domain([yMin, yMax]).nice(6);\n\t\t\t\n\t\t\tlet yScaledMin = y(y.domain()[0]);\n\n\t\t\tactualArea.y1(yScaledMin);\n\t\t\tarea.y0(yScaledMin);\n\n\t\t\tvar toolTip = d3.tip(d3.select(this.$.chart))\n\t\t\t\t.attr(\"class\", \"d3-tip\")\n\t\t\t\t.offset([-8, 0])\n\t\t\t\t.html(function(d) {\n\t\t\t\t\treturn d.msg;\n\t\t\t\t});\n\n    \tsvg.call(toolTip);\n\n\t\t\tlet actualData = [], designData = [], forecastData = [], targetData = [];\n\t\t\tlet todayActual = 0, todayTarget = 0, todayForecast = 0, todayDesign = 0;\n      data.forEach((_data) => {\n        if(_data.actual == _data.forecast) {\n\t\t\t\t\ttoday = _data.date;\n\t\t\t\t\tthis.actualDispVal = _data.actual;\n\t\t\t\t\tthis.targetDispVal = _data.target;\n\t\t\t\t\tthis.forecastDispVal = _data.forecast;\n\t\t\t\t\tthis.designDispVal = _data.design;\n\t\t\t\t\ttodayActual = this.actualDispVal;\n\t\t\t\t\ttodayTarget = this.targetDispVal;\n\t\t\t\t\ttodayForecast = this.forecastDispVal;\n\t\t\t\t\ttodayDesign = this.designDispVal;\n        }\n        if(_data.actual > 0) {actualData.push(_data)}\n        if(_data.target > 0) {targetData.push(_data)}\n        if(_data.forecast > 0) {forecastData.push(_data)}\n        if(_data.design > 0) {designData.push(_data)}\n      });\n\n      if(!today) {\n        today = new Date();\n      }\n\n      this.set(\"hideActualLegend\", actualData.length === 0);\n      this.set(\"hideTargetLegend\", targetData.length === 0);\n      this.set(\"hideForecastLegend\", forecastData.length === 0);\n\t\t\tthis.set(\"hideDesignCapacityLegend\", designData.length === 0);\n\t\t\t\n\t\t\tlet updateLegendVal = (d) => {\n\t\t\t\tthis.actualDispVal = d.actual;\n\t\t\t\tthis.targetDispVal = d.target;\n\t\t\t\tthis.forecastDispVal = d.forecast;\n\t\t\t\tthis.designDispVal = d.design;\n\t\t\t};\n\n\t\t\tlet revertLegendValToToday = () => {\n\t\t\t\tthis.actualDispVal = todayActual;\n\t\t\t\tthis.targetDispVal = todayTarget;\n\t\t\t\tthis.forecastDispVal = todayForecast;\n\t\t\t\tthis.designDispVal = todayDesign;\n\t\t\t};\n\n\t\t\tif(designData.length) {\n        svg.append(\"path\")\n  \t\t\t\t\t.datum(data)\n  \t\t\t\t\t.attr(\"fill\", \"#eddd46\")\n\t\t\t\t\t\t.attr(\"d\", area)\n\t\t\t\t\t\t.style(\"pointer-events\", \"none\");\n\t\t\t\t\n\t\t\t\tsvg.selectAll(\".dot\")\n\t\t\t\t\t\t.data(data)\n\t\t\t\t\t\t.enter()\n\t\t\t\t\t\t\t.append(\"circle\")\n\t\t\t\t\t\t\t.attr(\"r\", 0)\n\t\t\t\t\t\t\t.attr(\"cx\", (d, i) => x(d.date))\n\t\t\t\t\t\t\t.attr(\"cy\", (d) => y(d.design))\n\t\t\t\t\t\t\t.attr(\"fill\", \"transparent\")\n\t\t\t\t\t\t\t.attr(\"class\", \"design-circle\")\n\t\t\t\t\t\t\t.on('mouseover', function(d, i) {\n\t\t\t\t\t\t\t\tupdateLegendVal(d);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.on('mouseout', function(d) {\n\t\t\t\t\t\t\t\trevertLegendValToToday();\n\t\t\t\t\t\t\t});\n      }\n\n\t\t\tif(!this.hideActual && actualData.length) {\n\t\t\t\tsvg.append(\"path\")\n\t\t\t\t\t.datum(actualData)\n\t\t\t\t\t.attr(\"class\", \"actual-area\")\n\t\t\t\t\t.style(\"fill\", \"#5abef6\")\n\t\t\t\t\t.attr(\"d\", actualArea)\n\t\t\t\t\t.style(\"pointer-events\", \"none\");\n\n\t\t\t\tsvg.selectAll(\".dot\")\n\t\t\t\t\t.data(actualData)\n\t\t\t\t\t.enter()\n\t\t\t\t\t\t.append(\"circle\")\n\t\t\t\t\t\t.attr(\"r\", 2)\n\t\t\t\t\t\t.attr(\"cx\", (d, i) => x(d.date))\n\t\t\t\t\t\t.attr(\"cy\", (d) => y(d.actual))\n\t\t\t\t\t\t.attr(\"fill\", \"#5abef6\")\n\t\t\t\t\t\t.attr(\"class\", \"actual-circle\")\n\t\t\t\t\t\t.on('mouseover', function(d, i) {\n\t\t\t\t\t\t\td3.select(this)\n\t\t\t\t\t\t\t\t.attr('r', 5);\n\t\t\t\t\t\t\td.msg = tooltipTimeFormat(d.date) + \"<br>\"\n\t\t\t\t\t\t\t\t+ \"Actual of <b>\" + d.actual + \"</b><br>\" + \"produced in \"\n\t\t\t\t\t\t\t\t+ tooltipTimeFormat2(d.date);\n\t\t\t\t\t\t\tupdateLegendVal(d);\n\t\t\t\t\t\t\ttoolTip.show(d);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.on('mouseout', function(d) {\n\t\t\t\t\t\t\td3.select(this)\n\t\t\t\t\t\t\t\t.attr('r', 2);\n\t\t\t\t\t\t\trevertLegendValToToday();\n\t\t\t\t\t\t\ttoolTip.hide(d);\n\t\t\t\t\t\t});\n\t\t\t}\n\n      if(!this.hideForecast && forecastData.length > 0) {\n        let areaAboveForecastLine = d3.area()\n          .x(forecastLine.x())\n          .y0(forecastLine.y())\n          .y1(yScaledMin);\n        let areaBelowForecastLine = d3.area()\n          .x(forecastLine.x())\n          .y0(forecastLine.y())\n          .y1(actualArea.y());\n        let areaAboveActual = d3.area()\n          .x(actualArea.x())\n          .y0(actualArea.y())\n          .y1(yScaledMin);\n        let areaBelowActual = d3.area()\n          .x(actualArea.x())\n          .y0(actualArea.y())\n          .y1(forecastLine.y());\n        let defs = svg.append('defs');\n\n        defs.append('clipPath')\n          .attr('id', 'clip-forecast')\n          .append('path')\n          .datum(forecastData)\n          .attr(\"class\", \"forecast-area forecast-positive\")\n          .attr('d', areaAboveForecastLine)\n\t\t\t\t\t.style(\"pointer-events\", \"none\");\n\n        defs.append('clipPath')\n          .attr('id', 'clip-actual')\n          .append('path')\n          .datum(forecastData)\n          .attr(\"class\", \"forecast-area forecast-negative\")\n          .attr('d', areaAboveActual)\n\t\t\t\t\t.style(\"pointer-events\", \"none\");\n\n        svg.append('path')\n          .datum(forecastData)\n          .attr('d', areaBelowForecastLine)\n          .attr(\"class\", \"forecast-area forecast-negative\")\n          .attr('clip-path', 'url(#clip-actual)')\n\t\t\t\t\t.style(\"pointer-events\", \"none\");\n\n        svg.append('path')\n          .datum(forecastData)\n          .attr('d', areaBelowActual)\n          .attr(\"class\", \"forecast-area forecast-positive\")\n          .attr('clip-path', 'url(#clip-forecast)')\n\t\t\t\t\t.style(\"pointer-events\", \"none\");\n      }\n\n\t\t\tif(!this.hideTarget && targetData.length) {\n\t\t\t\tsvg.append(\"path\")\n\t\t\t\t\t\t.data([data])\n\t\t\t\t\t\t.attr(\"class\", \"target-line\")\n\t\t\t\t\t\t.style(\"stroke\", \"red\")\n\t\t\t\t\t\t.attr(\"d\", targetChart)\n\t\t\t\t\t\t.style(\"pointer-events\", \"none\");\n\n\t\t\t\tsvg.selectAll(\".dot\")\n\t\t\t\t\t.data(data)\n\t\t\t\t\t.enter()\n\t\t\t\t\t\t.append(\"circle\")\n\t\t\t\t\t\t.attr(\"r\", 2)\n\t\t\t\t\t\t.attr(\"cx\", (d, i) => x(d.date))\n\t\t\t\t\t\t.attr(\"cy\", (d) => y(d.target))\n\t\t\t\t\t\t.attr(\"fill\", \"red\")\n\t\t\t\t\t\t.attr(\"class\", \"target-circle\")\n\t\t\t\t\t\t.on('mouseover', function(d, i) {\n\t\t\t\t\t\t\td3.select(this)\n\t\t\t\t\t\t\t\t.attr('r', 5);\n\t\t\t\t\t\t\td.msg = tooltipTimeFormat(d.date) + \"<br>\"\n\t\t\t\t\t\t\t\t+ \"Target of <b>\" + d.target + \"</b><br>\" + \"produced in \"\n\t\t\t\t\t\t\t\t+ tooltipTimeFormat2(d.date);\n\t\t\t\t\t\t\tupdateLegendVal(d);\n\t\t\t\t\t\t\ttoolTip.show(d);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.on('mouseout', function(d) {\n\t\t\t\t\t\t\td3.select(this)\n\t\t\t\t\t\t\t\t.attr('r', 2);\n\t\t\t\t\t\t\trevertLegendValToToday();\n\t\t\t\t\t\t\ttoolTip.hide(d);\n\t\t\t\t\t\t});\n\t\t\t}\n\n      if(!this.hideForecast && forecastData.length) {\n        svg.append(\"path\")\n\t\t\t\t\t.datum(forecastData)\n\t\t\t\t\t.attr(\"class\", \"forecast-line\")\n\t\t\t\t\t.attr(\"d\", forecastLine);\n\n        svg.selectAll(\".dot\")\n\t\t\t\t\t.data(forecastData)\n\t\t\t\t\t.enter()\n\t\t\t\t\t\t.append(\"circle\")\n\t\t\t\t\t\t.attr(\"r\", 2)\n\t\t\t\t\t\t.attr(\"cx\", (d, i) => x(d.date))\n\t\t\t\t\t\t.attr(\"cy\", (d) => y(d.forecast))\n\t\t\t\t\t\t.attr(\"fill\", \"rgba(164, 117, 237, 0.8)\")\n\t\t\t\t\t\t.attr(\"class\", \"forecast-circle\")\n\t\t\t\t\t\t.on('mouseover', function(d, i) {\n\t\t\t\t\t\t\td3.select(this)\n\t\t\t\t\t\t\t\t.attr('r', 5);\n\t\t\t\t\t\t\td.msg = tooltipTimeFormat(d.date) + \"<br>\"\n\t\t\t\t\t\t\t\t+ \"Forecast of <b>\" + d.forecast + \"</b><br>\" + \"produced in \"\n\t\t\t\t\t\t\t\t+ tooltipTimeFormat2(d.date);\n\t\t\t\t\t\t\tupdateLegendVal(d);\n\t\t\t\t\t\t\ttoolTip.show(d);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.on('mouseout', function(d) {\n\t\t\t\t\t\t\td3.select(this)\n\t\t\t\t\t\t\t\t.attr('r', 2);\n\t\t\t\t\t\t\trevertLegendValToToday();\n\t\t\t\t\t\t\ttoolTip.hide(d);\n\t\t\t\t\t\t});\n      }\n\n\t\t\t// Add the X Axis\n\t\t\tsvg.append(\"g\")\n\t\t\t\t\t.attr(\"transform\", \"translate(0,\" + height + \")\")\n\t\t\t\t\t.attr(\"class\", \"x-axis\")\n\t\t\t\t\t.call(d3.axisBottom(x).tickFormat(d3.timeFormat('%d %b %y')));\n\t\t\t\t\t\n\t\t\tsvg.append(\"g\")\t\t\t\n\t\t\t\t.attr(\"class\", \"y-grid\")\n\t\t\t\t.call(d3.axisLeft(y)\n\t\t\t\t\t\t.ticks(5)\n\t\t\t\t\t\t.tickSize(-width)\n\t\t\t\t\t\t.tickFormat(\"\"));\n\n\t\t\t// Add the Y Axis\n\t\t\tsvg.append(\"g\")\n\t\t\t\t\t.attr(\"class\", \"y-axis\")\n\t\t\t\t\t.call(d3.axisLeft(y).ticks(6));\n\n      svg.append(\"svg:line\")\n        .attr(\"class\", \"today\")\n        .attr(\"x1\", x(today))\n        .attr(\"y1\", height+18)\n        .attr(\"x2\", x(today))\n        .attr(\"y2\", -7);\n\n      svg.append(\"text\")\n        .attr(\"class\", \"today-text\")\n        .attr(\"x\", (x(x.domain()[0]) + x(today))/2)\n        .attr(\"y\", -9)\n\t\t\t\t.text(\"Historical\");\n\t\t\t\t\n\t\t\tsvg.append(\"text\")\n        .attr(\"class\", \"today-text\")\n        .attr(\"x\", x(today)-10)\n        .attr(\"y\", -9)\n\t\t\t\t.text(\"Today\");\n\t\t\t\t\n\t\t\tif(!this.hideForecast && forecastData.length > 0) {\n\t\t\t\tsvg.append(\"text\")\n\t\t\t\t\t.attr(\"class\", \"today-text\")\n\t\t\t\t\t.attr(\"x\", (x(x.domain()[1]) * 0.8))\n\t\t\t\t\t.attr(\"y\", -9)\n\t\t\t\t\t.text(\"Forecast\");\n\t\t\t}\n\n\t\t\tsvg.append(\"text\")\n\t\t\t\t.attr(\"transform\", \"rotate(-90)\")\n\t\t\t\t.attr(\"y\", 0 - margin.left)\n\t\t\t\t.attr(\"x\",0 - (height / 2))\n\t\t\t\t.attr(\"dy\", \"1em\")\n\t\t\t\t.attr(\"class\", \"yaxis-label\")\n\t\t\t\t.text(this.unit);\n\n      this.fire(\"chart-drawn\", {});\n\t\t},\n\t\t_toggleActual() {\n\t\t\tthis.hideActual = !this.hideActual;\n\t\t\tif(this.hideActual) {\n\t\t\t\tthis.querySelector(\".actual-area\").style.display = \"none\";\n\t\t\t\tthis.querySelectorAll(\".actual-circle\").forEach((elt) => {\n\t\t\t\t\telt.style.display = \"none\";\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.querySelector(\".actual-area\").style.display = \"block\";\n\t\t\t\tthis.querySelectorAll(\".actual-circle\").forEach((elt) => {\n\t\t\t\t\telt.style.display = \"block\";\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t_toggleTarget() {\n\t\t\tthis.hideTarget = !this.hideTarget;\n\t\t\tif(this.hideTarget) {\n\t\t\t\tthis.querySelector(\".target-line\").style.display = \"none\";\n\t\t\t\tthis.querySelectorAll(\".target-circle\").forEach((elt) => {\n\t\t\t\t\telt.style.display = \"none\";\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.querySelector(\".target-line\").style.display = \"block\";\n\t\t\t\tthis.querySelectorAll(\".target-circle\").forEach((elt) => {\n\t\t\t\t\telt.style.display = \"block\";\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t_toggleForecast() {\n\t\t\tthis.hideForecast = !this.hideForecast;\n\t\t\tif(this.hideForecast) {\n\t\t\t\tthis.querySelector(\".forecast-line\").style.display = \"none\";\n\t\t\t\tthis.querySelectorAll(\".forecast-circle\").forEach((elt) => {\n\t\t\t\t\telt.style.display = \"none\";\n\t\t\t\t});\n        this.querySelectorAll(\".forecast-area\").forEach((elt) => {\n\t\t\t\t\telt.style.display = \"none\";\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.querySelector(\".forecast-line\").style.display = \"block\";\n\t\t\t\tthis.querySelectorAll(\".forecast-circle\").forEach((elt) => {\n\t\t\t\t\telt.style.display = \"block\";\n\t\t\t\t});\n\t\t\t\tthis.querySelectorAll(\".forecast-area\").forEach((elt) => {\n\t\t\t\t\telt.style.display = \"block\";\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t_redraw(newData, oldData) {\n\t\t\tif(oldData && oldData.length) {\n\t\t\t\tPolymer.dom(this.$.chart).node.innerHTML = \"\";\n\t\t\t\tthis.draw();\n\t\t\t}\n\t\t},\n\t\t_setLegendLabels(labels) {\n\t\t\tif(labels && labels.length) {\n\t\t\t\tthis.set(\"actualLegendLabel\", labels[0]);\n\t\t\t\tthis.set(\"targetLegendLabel\", labels[1]);\n\t\t\t\tthis.set(\"forecastLegendLabel\", labels[2]);\n\t\t\t\tthis.set(\"designCapacityLegendLabel\", labels[3]);\n\t\t\t}\n\t\t},\n    _compute(prop) {\n      return prop;\n    }\n  });\n})();\n"]}